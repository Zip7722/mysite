<html layout:decorate="~{layout}">
<div layout:fragment="content">
	<div class="container">
		<div class="jumbotron">
			<h2 class="display-4">게시판 목록</h2>
		</div>
		<!-- table>(thead>tr>th*2)+(tbody>tr>td*2) -->
		<table class="table table-striped">
			<thead class="table-warning">
				<tr class="text-center">
					<th>번호</th>
					<th>제목</th>
					<th>글쓴이</th>
					<th>작성일시</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="question, loop : ${paging}">
					<!--<td th:text="${loop.count}"></td>-->
					<td th:text="${paging.getTotalElements - (paging.number * paging.size) - loop.index}"></td>
					<td>
						<a th:href="@{|/question/detail/${question.id}|}" th:text="${question.subject}"
							class="text-warning"></a>
							<span th:if="${#lists.size(question.answerList) > 0}" 
								th:text="${#lists.size(question.answerList)}"
								class="badge bbadge-pill badge-info ml-2 ">
							</span>
					</td>
					<td th:if="${question.author !=null}">[[${question.author.username}]]]</td>
					<td th:text="${#temporals.format(question.createDate,'yyyy년 MM월 dd일 HH시 mm분')}"></td>

				</tr>
			</tbody>
		</table>

		<!--페이지 구조-->
		<nav th:if="${!paging.isEmpty()}">
			<ul class="pagination justify-content-center" >
				<li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled'">					
					<a href="javascript:void(0)" th:href="@{|?page=${paging.number-1}|}" class="page-link"> 
						<span>이전</span>
					</a>
				</li>
				<li class="page-item" th:each="page : ${#numbers.sequence(0,paging.totalPages)}"
					
					th:if="${page >= paging.number-2 and page <= paging.number+2}"
					th:classappend="${page == paging.number}? 'active'">
					<a th:href="@{|?page=${page}|}" class="page-link " href="javascript:void(0)" th:text="${page}"></a>
				</li>
				<!-- th:each="page : ${#numbers.sequence(시작번호 , 끝 번호)}를 넣으면 정해진 범위만큼 반복을 만들어내는 타임리프의 기능이다 -->
				
				<!--클릭한 페이지 넘버(number) 전페 페이지 넘버(numbers)-->
				<li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled'">
					<a href="javascript:void(0)" th:href="@{|?page=${paging.number+1}|}" class="page-link">
					<span>다음</span>
					<!--and page < paging.number-->
					<!--class:page-ling span이 아닌 a태그에 주어 disabled를 span이 아닌, a태그가 적용되게 -->
				</a>
			</li>
			</ul>
		</nav>

		<a th:href="@{/question/create}" class="btn btn-warning text-white">질문 등록하기</a>
	</div>
</div>

</html>