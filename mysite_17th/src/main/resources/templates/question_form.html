<!-- question_form.html -->
<html layout:decorate="~{layout}">
<div layout:fragment="content" class="container">
	<h5 class="my-5 border-bottom pb-2 display-4">질문등록</h5>
	<form method="post" th:object="${questionForm}">
			<!--오류를 표시하려면 타임리프의 th:object 속성이 반드시 필요하다. <Form>의 입력항목들이  QuestionFrom클래스와 연결된다는 점을 타임리프에 알려주는 역할
				 -->
				
			<!--<div th:if="${#fields.hasErrors()}">
				<div th:each="err : ${#fields.allErrors()}" th:text="${err}" class="alert alert-danger" ></div>
				if문의 hasAnyErrors()로 에러가 발생했을 경우 err 변수에 해당 메시지를 담고 err을 출력  
			</div> 하단에 fragment된 div를 사용할 예정-->
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
			<!--th:action 을 삭제하면 csrf값이 자동으로 생서오디지 않기 떄문에 수동으로 설정하기 위해 hidden으로 가져간다
			이때 th:action이 아니라 value로 설정해도 post로 폼 전송시에 action속성이 자동설정된다
			-->
			
			     <div th:replace="~{form_error :: formErrorFragment}"></div>
				 <!--replace속성을 사용하여 해당 div를 form_error파일의 formErrorsfragemet이름의 fragement로 대체한다-->
			
		<div class="form-group">
			<label for="exampleFormControlInput1" class="text-warning">질문제목</label>
			<input type="text" class="form-control" id="exampleFormControlInput1" placeholder="이것이 궁금합니다."
				name="subject">
		</div>
		<div class="form-group">
			<label for="exampleFormControlTextarea1" class="text-warning">질문내용</label>
			<textarea sec:authorize="isAnonymous()" name="content" id="content" cols="30" rows="10" class="form-control mb-0" th:field="*{content}" disabled placeholder="로그인된 사용자만 작성가능합니다"></textarea>
			<textarea sec:authorize="isAuthenticated()" name="content" id="content" cols="30" rows="10" class="form-control mb-0" th:field="*{content}"></textarea>
												
		</div>
		<input type="submit" value="글 등록" class="btn btn-info"  />
	</form>
</div>

</html>
